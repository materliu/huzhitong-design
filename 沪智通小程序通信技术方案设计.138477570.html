<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/other/7e615335281b/mat-api-v2-modificationdate-1517260474501-version-1">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2025-04-27T22:59:13.225+0800">
        <meta name="exp-page-id" content="138477570">
        <meta name="exp-page-title" content="沪智通小程序通信技术方案设计">
        <meta name="exp-page-version" content="1">
        <meta name="exp-page-scroll-page-id" content="">
        <meta name="exp-page-created" content="2025-04-27T20:19:42.279+0800">
        <meta name="exp-page-last-modified" content="2025-04-27T22:58:48.953+0800">
        <meta name="exp-page-labels" content="">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="MAT">
        <meta name="exp-space-title" content="mater的奋斗史">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="">
        <meta name="exp-document-title" content="沪智通小程序通信技术方案设计">
        <meta name="exp-version-status" content="">
        <meta name="exp-version-id" content="">
        <meta name="exp-version-name" content="">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>沪智通小程序通信技术方案设计</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="沪智通小程序通信技术方案设计-top" data-pageid="138477570" data-confluence-editor-version="v1" data-confluence-deployment-type="DATACENTER">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="沪智通小程序通信技术方案设计.138477570.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/other/7e615335281b/mat-api-v2-modificationdate-1517260474501-version-1)" alt="mater的奋斗史" title="mater的奋斗史"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-8215c490cb01caebe0b16b6aad5b3b55c85163a587444f8ff9fc5ab80606d3c1">
                    <a href="沪智通小程序通信技术方案设计.138477570.html">
                        沪智通小程序通信技术方案设计
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=138477570" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                    <li class="breadcrumb active" aria-current="page">
                        沪智通小程序通信技术方案设计
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-047f1afacf0fa9d7054473bc02e03b714a90c1f5c147c82090a7b545fd52d76e">
                            沪智通小程序通信技术方案设计
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <h2 class="heading-1 ace-line old-record-id-UGaOdBhDuoqYkwx6LyycB0xWnWf scroll-original-h1 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="id-沪智通小程序通信技术方案设计-问题：" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="2">问题：</h2><ol><li data-uuid="20029417-e032-47dd-8442-abd4dcd72ea1">大模型应该输出的接口和格式：</li><li data-uuid="1de4b7b4-7485-4f4c-b327-0d8e328fbb0c">微信小程序前端采用哪种技术方案渲染？</li></ol><h2 class="heading-1 ace-line old-record-id-UGaOdBhDuoqYkwx6LyycB0xWnWf scroll-original-h1 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="id-沪智通小程序通信技术方案设计-原则" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="2">原则</h2><ul><li data-uuid="651eaf8b-608f-4333-be70-11a142d1f5c0">支持消息类型（多模态展示）后续可以灵活扩展</li></ul><h2 class="heading-1 ace-line old-record-id-UreedM8AUobfNmxJw4JcJlU9n1f scroll-original-h1 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="id-沪智通小程序通信技术方案设计-消息设计理念" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="2">消息设计理念</h2><h3 class="heading-2 ace-line old-record-id-BRTPdeFHZo4rT5xXNFEchb41nyh scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-block文档" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">block文档</h3><ul class="list-bullet1"><li class="ace-line old-record-id-PG07dnrb2oYjd9xxHBkc6Xxtnrb" data-list="bullet" data-uuid="58a69236-4a75-49c4-9703-79a831366798"><p>将呈现的消息块类比飞书block文档，文档里有各种各样的block</p><ul class="list-bullet2"><li class="ace-line ace-line old-record-id-EDT9dTYndoFglKxkaFecmyX9nQc" data-list="bullet"><p>文本block</p></li><li class="ace-line ace-line old-record-id-FUp2dOXhgoizJqxPBQMcoDa7nJe" data-list="bullet"><p>标题block</p></li><li class="ace-line ace-line old-record-id-FQ4WdIPm9o8YRmxBnJ9c2cLFnSe" data-list="bullet"><p>列表block</p></li><li class="ace-line ace-line old-record-id-QiVCdCVFromvPFx1bBYcRIhlnUh" data-list="bullet"><p>图片block</p></li><li class="ace-line ace-line old-record-id-TSz0da3ebokRoyxXxnFcNt0Snmf" data-list="bullet"><p>表格block</p></li><li class="ace-line ace-line old-record-id-RswOdAoJTolqnLxY5d5cyJKInzg" data-list="bullet"><p>代码块block</p></li><li class="ace-line ace-line old-record-id-D3wtd3KJnopB8Yx1W9LcLzJ9nic" data-list="bullet"><p>等等</p></li></ul></li><li class="ace-line old-record-id-LmutdnW39oOEEZxwNLBcDCrGnsg" data-list="bullet" data-uuid="fcf30786-e3f3-4c35-932a-f6b1a1d879e1"><p>后续新增能力，只需要在数据层增加新的block类型，前端注册对应的渲染器，即可实现能力扩展</p></li></ul><h3 class="heading-2 ace-line old-record-id-EKGDdn3TKoDbFuxfO6scjMOznsh scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-单次对话任务" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">单次对话任务</h3><ul class="list-bullet1"><li class="ace-line old-record-id-HnjKdEUlXoqkMLxActjccWRynMg" data-list="bullet" data-uuid="49ae46fd-33a6-492c-9787-87a20150a102"><p>考虑到对话的动态性与灵活性，单次对话任务的数据层设计采用类似的方式</p></li><li class="ace-line old-record-id-KIMsdo4adovT2PxmXIHcmOrxn0c" data-list="bullet" data-uuid="a3e5f02c-7fe7-4748-8847-0afadc7470b4"><p>把对话任务的执行过程看成是一堆事件的集合，用一个event序列来表示对话输出过程</p></li><li class="ace-line old-record-id-QLlBd0pNBoLeevxEQWCcdG90nPh" data-list="bullet" data-uuid="344d43a3-9059-4f3f-ad35-0f19e03afc7e"><p>前端针对根据event类型的不同，如果需要渲染，选择对应的渲染方式</p></li></ul><p><br clear="none"></p><h2 class="heading-1 ace-line old-record-id-MsFad8aHdotJahxD3m6c9vqmnSb scroll-original-h1 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="id-沪智通小程序通信技术方案设计-外层数据结构" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="2">外层数据结构</h2><div class="scroll-code scroll-highlighted-code-block" data-language="json" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    task_id: </code><code class="string">""</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    task_type: </code><code class="string">"restaurant_recommend"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    events:[</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            id: </code><code class="string">""</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            type: </code><code class="string">"title"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            data: {</code></div>
<div class="line"><code class="plain">                content: </code><code class="string">"上海本帮菜"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">                timestamp: </code><code class="value">0</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            event_id: </code><code class="string">""</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            event_type: </code><code class="string">"position"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            event_data:{</code></div>
<div class="line"><code class="plain">                content: </code><code class="string">"沈大成（南京东路店）"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">                point:[</code></div>
<div class="line"><code class="plain">                    {</code></div>
<div class="line"><code class="plain"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;longitude: </code><code class="string">"116.3975"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">                        title: </code><code class="string">"经度"</code></div>
<div class="line"><code class="plain">                    },</code></div>
<div class="line"><code class="plain">                    {</code></div>
<div class="line"><code class="plain"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Latitude: </code><code class="string">"39.9087"</code></div>
<div class="line"><code class="plain">                        title: </code><code class="string">"纬度"</code></div>
<div class="line"><code class="plain">                    }</code></div>
<div class="line"><code class="plain">                ]</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">     &nbsp; &nbsp;{</code></div>
<div class="line"><code class="plain">            event_id: </code><code class="string">""</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            event_type: </code><code class="string">"desc"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            event_data:{</code></div>
<div class="line"><code class="plain">                sections:[</code></div>
<div class="line"><code class="plain">                    {</code></div>
<div class="line"><code class="plain">                        type: </code><code class="string">"text"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">                        content: </code><code class="string">"距离303米,评分4.3。招牌烧鸽子味道极佳,菜品丰富且口感香醇,价格亲民,适合家庭聚餐。服务态度良好,支持预订包间和大厅用餐。"</code></div>
<div class="line"><code class="plain">                    },</code></div>
<div class="line"><code class="plain">                    {</code></div>
<div class="line"><code class="plain">                        type: </code><code class="string">"pic"</code></div>
<div class="line"><code class="plain">                        content: </code><code class="string">"url('https://baiducc.com/pic/231514')"</code></div>
<div class="line"><code class="plain">                    }</code></div>
<div class="line"><code class="plain">                ]</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain"> &nbsp; &nbsp; &nbsp; &nbsp;{</code></div>
<div class="line"><code class="plain">            event_id: </code><code class="string">""</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            event_type: </code><code class="string">"action"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            event_data:{</code></div>
<div class="line"><code class="plain">                schema: </code><code class="string">""</code><code class="plain">, </code><code class="comments">// 要采取的动作，比如导航</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    ]</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><h2 class="heading-1 ace-line old-record-id-UO9Wd9oNNojFeqxHng2cn5hondT scroll-original-h1 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="id-沪智通小程序通信技术方案设计-Event类型" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="2">Event类型</h2><h3 class="heading-2 ace-line old-record-id-MsXsdcg6voOWGEx8DAgc6QNdnRg scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-一期事件" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">一期事件</h3><p><br clear="none">由于本期，产品形态不固定，没按照原子能力细粒度设计展示最基础组件，设计的事件类型也偏粗粒度，同时偏业务语义，后续按需扩充即可</p><h4 class="heading-3 ace-line old-record-id-D65rd9Zdeowu9Axy49ncfeqMnJe scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h4 scroll-relative-h4" id="id-沪智通小程序通信技术方案设计-message" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="4" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="4">message</h4><div class="scroll-code scroll-highlighted-code-block" data-language="json" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">   event_id: </code><code class="string">""</code><code class="plain">,</code></div>
<div class="line"><code class="plain">   event_type: </code><code class="string">"action"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">   event_data:{</code></div>
<div class="line"><code class="plain">      schema: </code><code class="string">""</code><code class="plain">, </code><code class="comments">// 要采取的动作，比如导航</code></div>
<div class="line"><code class="plain">   }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><pre class="ace-line ace-line old-record-id-Mm38d0Gh1octfyxj8M7cRyR6ngd"><br clear="none"></pre><p>渲染方式：对应的导航渲染框架</p><h4 class="heading-3 ace-line old-record-id-JFKYd0UD2oRHsLxu32McLvVcnqf scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h4 scroll-relative-h4" id="id-沪智通小程序通信技术方案设计-等等" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="4" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="4">等等</h4><h3 class="heading-2 ace-line old-record-id-C7EHdSa7goW5PdxLlkUcngk8nNf scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-长期事件" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">长期事件</h3><blockquote class="old-record-id-Lu5ldqKFboQAMaxNGaecdaa6nAe" data-type="quote_container"><p>如果产品长期方向往通用助手转变，后续可以根据能力扩展对应的event，比如video，展示对应的视频资源</p></blockquote><h2 class="heading-1 ace-line old-record-id-UreedM8AUobfNmxJw4JcJlU9n1f scroll-original-h1 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="id-沪智通小程序通信技术方案设计-渲染设计理念" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="2">渲染设计理念</h2><h3 class="heading-2 ace-line old-record-id-BRTPdeFHZo4rT5xXNFEchb41nyh scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-渲染引擎" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">渲染引擎</h3><p><span style="color:var(--ds-text,#333333);">小程序建议使用渲染引擎 Skyline</span></p><p style="">其使用更精简高效的渲染管线，并带来诸多增强特性，让 Skyline 拥有更接近原生渲染的性能体验。</p><h4 class="header_24758 auto-hide-last-sibling-br scroll-original-h4 scroll-custom-section-heading scroll-document-section-heading scroll-h4 scroll-relative-h4" style="" id="id-沪智通小程序通信技术方案设计-Skyline渲染引擎的好处" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="4" data-scroll-original-heading-rank="4" data-scroll-relative-heading-rank="4">Skyline 渲染引擎的好处</h4><ol class="auto-hide-last-sibling-br" style=""><li style="list-style-type: decimal;" data-uuid="121d7e07-51be-43de-9b3f-50cb0feb74f7"><p><strong>高性能渲染</strong><span>&nbsp;</span>🚀</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">Skyline 渲染引擎通过优化渲染算法，能够在微信小程序中实现流畅的高性能图形渲染，减少因图形复杂性带来的卡顿和延迟。</li></ul></li><li style="list-style-type: decimal;" data-uuid="e851c8ab-7b7d-46e3-ad01-ee9165eb512d"><p><strong>易于使用</strong><span>&nbsp;</span>🔧</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">渲染引擎提供了简洁易用的 API，开发者可以轻松地创建和定制图表，无需复杂的配置。只需几行代码就可以生成丰富的图形效果。</li></ul></li><li style="list-style-type: decimal;" data-uuid="45e3a133-d30e-427e-a872-3647db5fa872"><p><strong>支持多种图表类型</strong><span>&nbsp;</span>📊</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">Skyline 渲染引擎支持多种常见的图表类型，包括柱状图、折线图、饼图、散点图等，能够满足不同数据可视化需求。</li></ul></li><li style="list-style-type: decimal;" data-uuid="c5a26403-2b73-49ed-9bbe-f5d3a632161c"><p><strong>灵活的交互支持</strong><span>&nbsp;</span>💡</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">引擎内置了丰富的交互功能，开发者可以轻松实现图表的放大、缩小、拖拽、点击等交互效果，提升用户体验。</li></ul></li><li style="list-style-type: decimal;" data-uuid="519acc6a-474e-4ad1-a70e-26a9daaabd6d"><p><strong>高兼容性</strong><span>&nbsp;</span>🌐</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">Skyline 渲染引擎兼容性强，能够在各种设备和屏幕尺寸下保持一致的表现，适应不同用户的使用场景。</li></ul></li></ol><h3 class="heading-2 ace-line old-record-id-BRTPdeFHZo4rT5xXNFEchb41nyh scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-消息协议" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">消息协议</h3><h4 class="header_24758 auto-hide-last-sibling-br scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h4 scroll-relative-h4" style="" id="id-沪智通小程序通信技术方案设计-WebSocket消息协议介绍" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="4" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="4">WebSocket 消息协议介绍</h4><p>WebSocket 是一种用于在单个 TCP 连接上进行全双工通信的协议。它被设计为能够在 Web 浏览器和服务器之间提供更高效的实时交互。</p><h4 class="header_24758 auto-hide-last-sibling-br scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h4 scroll-relative-h4" style="" id="id-沪智通小程序通信技术方案设计-WebSocket的好处" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="4" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="4">WebSocket 的好处</h4><h5 class="header_24758 auto-hide-last-sibling-br scroll-original-h4 scroll-custom-section-heading scroll-document-section-heading scroll-h5 scroll-relative-h5" style="" id="id-沪智通小程序通信技术方案设计-使用WebSocket协议有很多显著的优势：" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="5" data-scroll-original-heading-rank="4" data-scroll-relative-heading-rank="5">使用 WebSocket 协议有很多显著的优势：</h5><ol class="auto-hide-last-sibling-br" style=""><li style="list-style-type: decimal;" data-uuid="90d19e1a-e37d-4118-9df6-405534f180f6"><p><strong>全双工通信</strong><span>&nbsp;</span>🌐</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">WebSocket 允许客户端和服务器同时发送和接收数据，而不需要等待对方的应答。这种全双工通信模式比传统的 HTTP 请求 - 响应模式更加高效，适合实时应用。</li></ul></li><li style="list-style-type: decimal;" data-uuid="5760407e-b8ab-4c4d-8115-0443262ff003"><p><strong>降低网络开销</strong><span>&nbsp;</span>📉</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">在 WebSocket 连接建立之后，所有的通信都通过这个单一的 TCP 连接进行。因此，与重复进行 HTTP 请求 - 响应相比，WebSocket 减少了协议头部开销，从而显著降低了网络流量。</li></ul></li><li style="list-style-type: decimal;" data-uuid="ce2af0b0-e2ad-41ce-bc6e-db463db92b98"><p><strong>更低的延迟</strong><span>&nbsp;</span>🏃‍♂️</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">WebSocket 连接是持久的，它避免了传统 HTTP 请求的带宽和延迟开销。数据可以立即发送和接收，特别适合需要实时更新的应用，如在线游戏、股票交易平台等。</li></ul></li><li style="list-style-type: decimal;" data-uuid="cc3c93c6-1c18-4dbb-b540-82b9f55b64c2"><p><strong>高效的资源使用</strong><span>&nbsp;</span>🔋</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">由于 WebSocket 长连接的特性，服务器和客户端都可以保持较少的资源消耗来维持连接，这对于需要进行频繁通信的应用程序来说非常有利。</li></ul></li><li style="list-style-type: decimal;" data-uuid="ed170aba-148c-41d6-81f6-bf380483a4d8"><p><strong>支持广泛的语言和平台</strong><span>&nbsp;</span>🌍</p><ul class="auto-hide-last-sibling-br"><li style="list-style-type: disc;">WebSocket 被广泛支持，可以在很多主流编程语言和平台中使用，如 JavaScript、Java、Python 等。这使得开发者能够轻松集成 WebSocket 到他们的应用中。</li></ul></li></ol><h3 class="heading-2 ace-line old-record-id-BRTPdeFHZo4rT5xXNFEchb41nyh scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="id-沪智通小程序通信技术方案设计-打字机效果" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="3">打字机效果</h3><p>整体的消息接收，使用WebSocket的Frame，以Task的形式下发，一个个Task输出。</p><p>打字机效果，由前端模拟实现。</p><p>而 desc 结构体中的&nbsp;content 由LLM 陆续吐出，比如一次吐出 100字，不停叠加。</p><p>前端收到100字后，模拟打印机效果输出，输出过程中后100字到达，则接续输出，如果后100字未到达，则模拟思考过程。</p><pre><br clear="none"></pre><pre><br clear="none"></pre>
                        </div>
                    </section>

                </article>
            </main>





            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#沪智通小程序通信技术方案设计-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>

    </body>

</html>
